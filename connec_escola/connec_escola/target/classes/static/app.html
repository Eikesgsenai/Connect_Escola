<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendário de Eventos da Escola</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet" />
</head>
<body>
<button id="logout-button" class="button button-danger" onclick="logout()">Sair</button>

<div class="container">
    <section id="public-view">
        <header>
            <h1>Próximos Eventos da Escola</h1>
            <div id="admin-buttons-container" style="display: none;">
                <button id="admin-event-btn" class="button button-primary">
                    Ger. Eventos
                </button>
                <button id="admin-user-btn" class="button button-primary" style="margin-left: 10px;">
                    Ger. Usuários
                </button>
            </div>
        </header>
        <ul id="public-event-list" class="events-list"></ul>
        <template id="public-event-template">
            <li class="event-card event-card-public">
                <div class="event-date-block">
                    <span class="event-date-month"></span>
                    <span class="event-date-day"></span>
                </div>
                <div class="event-info">
                    <h3></h3>
                    <p class="event-detail">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                        </svg>
                        <span class="event-time"></span>
                    </p>
                    <p class="event-detail">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                        </svg>
                        <span class="event-local"></span>
                    </p>
                </div>
                <button class="event-share" onclick="handleShare(event)">
                    <img src="./assets/share-nodes-svgrepo-com.svg" alt="Compartilhar" style="width: 20px; height: 20px;">
                </button>
            </li>
        </template>
    </section>

    <section id="admin-event-view">
        <header>
            <h2>Painel de Gestão de Eventos</h2>
            <button class="button back" onclick="history.back()">Voltar</button>
        </header>

        <h3>Gestão de Eventos</h3>
        <form id="event-form">
            <input type="hidden" id="event-id" />
            <div class="form-field">
                <label for="event-title">Título:</label
                ><input type="text" id="event-title" required />
            </div>
            <div class="form-field">
                <label for="event-date">Data:</label
                ><input type="date" id="event-date" required />
            </div>

            <div class="form-field">
                <label for="event-time">Hora de Início:</label
                ><input type="time" id="event-time" required />
            </div>
            <div class="form-field">
                <label for="event-time-fim">Hora de Fim:</label
                ><input type="time" id="event-time-fim" required />
            </div>
            <div class="form-field">
                <label for="event-local">Local:</label
                ><input type="text" id="event-local" required />
            </div>
            <div class="form-field">
                <label for="event-map-link">Link do Mapa (Opcional):</label
                ><input
                    type="url"
                    id="event-map-link"
                    placeholder="http://googleusercontent.com/maps/google.com/0"
            />
            </div>
            <div class="form-field">
                <label for="event-description">Descrição:</label
                ><textarea id="event-description" rows="3"></textarea>
            </div>
            <button type="submit" class="button button-success">
                Salvar Evento
            </button>
            <button
                    type="button"
                    class="button button-danger"
                    onclick="resetForm()"
            >
                Cancelar
            </button>
        </form>

        <hr style="margin: 30px 0" />
        <h3>Eventos Cadastrados</h3>
        <ul id="admin-event-list" class="events-list"></ul>
    </section>

    <section id="admin-user-view">
        <header>
            <h2>Painel de Gestão de Usuários</h2>
            <button class="button back" onclick="history.back()">Voltar</button>
        </header>

        <div class="form-container">
            <h3>Criar Novo Usuário</h3>
            <form id="create-user-form">
                <div class="form-field">
                    <label for="user-nome">Nome:</label>
                    <input type="text" id="user-nome" required />
                </div>
                <div class="form-field">
                    <label for="user-email">Email:</label>
                    <input type="email" id="user-email" required />
                </div>
                <div class="form-field">
                    <label for="user-senha">Senha:</label>
                    <input type="password" id="user-senha" required minlength="6" />
                </div>
                <div class="form-field">
                    <label for="user-role">Permissão (Role):</label>
                    <select id="user-role" required>
                        <option value="ALUNO">ALUNO</option>
                        <option value="PROFESSOR">PROFESSOR</option>
                        <option value="ADMIN">ADMIN</option>
                    </select>
                </div>
                <button type="submit" class="button button-success">Criar Usuário</button>
            </form>
        </div>

        <hr style="margin: 30px 0" />

        <h3>Usuários Cadastrados</h3>
        <ul id="user-list" class="user-list">
        </ul>
    </section>

    <section id="details-view">
        <header>
            <h2 id="details-title"></h2>
            <button class="button back" onclick="history.back()">Voltar</button>
        </header>
        <div id="details-content" class="details-info"></div>
        <div class="attendance-section">
            <button id="rsvp-button" class="button button-info">Vou Comparecer</button>
            <span id="attendee-count"></span>
        </div>
    </section>
</div>

<script src="./app.js" charset="UTF-8"></script>
</body>
</html>